{% extends "layout.html" %}

{% block content %}
<div style="margin: 50px auto;">
    <div class="dashboard-header-row">
        <h1 class="glitch" data-text="SELLER DASHBOARD">SELLER DASHBOARD</h1>
        <div>
            <h2 style="margin: 0; display: inline-block; margin-right: 15px;">Welcome, {{ session.username }}</h2>
            <a href="{{ url_for('auth.logout') }}" class="btn-logout">LOGOUT</a>
        </div>
    </div>

    <!-- Stats -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-title">My Earnings</div>
            <div class="stat-value">{{ total_earnings }} {{ store.currency }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-title">Items Sold</div>
            <div class="stat-value">{{ total_sales }}</div>
        </div>
        <!-- Add Product Box (Acts as button) -->
        <div class="stat-card"
            style="display: flex; align-items: center; justify-content: center; border-style: dashed;">
            <button onclick="document.getElementById('add-modal').style.display='block'" class="btn-add-product">
                + ADD PRODUCT
            </button>
        </div>
    </div>

    <!-- Products List -->
    <div class="inventory-section">
        <h3 style="font-size: 1.5rem; text-transform: uppercase;">My Inventory</h3>
        <table class="inventory-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Category</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr>
                    <td>{{ product.name }}</td>
                    <td>{{ product.price }}</td>
                    <td>{{ product.category }}</td>
                    <td><span class="status-active">Active</span></td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" style="padding: 20px; text-align: center; color: #888;">No products in the void.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Simple Modal for Adding Product -->
<div id="add-modal" class="modal-overlay">
    <div class="modal-window">
        <span onclick="document.getElementById('add-modal').style.display='none'" class="close-modal">&times;</span>
        <h2 class="auth-header" style="font-size: 2rem;">Inject New Asset</h2>
        <form method="POST" action="{{ url_for('seller.add_product_action') }}" class="auth-form">
            <div class="auth-group">
                <label class="auth-label">Product Name</label>
                <input type="text" name="name" required class="auth-input">
            </div>
            <div class="auth-group">
                <label class="auth-label">Price</label>
                <input type="number" step="0.01" name="price" required class="auth-input">
            </div>
            <div class="auth-group">
                <label class="auth-label">Category</label>
                <select name="category" required class="auth-input">
                    <option value="Consumer Goods">Consumer Goods</option>
                    <option value="Digital Assets">Digital Assets</option>
                    <option value="Forbidden Items">Forbidden Items</option>
                </select>
            </div>
            <div class="auth-group">
                <label class="auth-label">Image URL</label>
                <input type="url" name="image_url" placeholder="https://..." class="auth-input">
            </div>
            <div class="auth-group">
                <label class="auth-label">Description</label>
                <textarea name="description" rows="3" class="auth-input"></textarea>
            </div>
            <button type="submit" class="auth-btn" style="width: 100%;">SUBMIT</button>
        </form>
    </div>
</div>
{% endblock %}