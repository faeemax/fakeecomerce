{% extends "layout.html" %}

{% block content %}
<div style="max-width: 1000px; margin: 50px auto; color: white;">
    <h1 style="text-align: center; margin-bottom: 40px;" class="glitch" data-text="SELLER DASHBOARD">SELLER DASHBOARD
    </h1>

    <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
        <h2 style="margin: 0;">Welcome, {{ session.username }}</h2>
        <a href="{{ url_for('auth.logout') }}"
            style="color: red; border: 1px solid red; padding: 5px 15px; text-decoration: none;">LOGOUT</a>
    </div>

    <!-- Stats -->
    <div
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px;">
        <div style="background: rgba(0,0,255,0.1); padding: 20px; border: 1px solid cyan; text-align: center;">
            <h3>My Earnings</h3>
            <p style="font-size: 2rem; font-weight: bold;">{{ total_earnings }} {{ store.currency }}</p>
        </div>
        <div style="background: rgba(0,0,255,0.1); padding: 20px; border: 1px solid cyan; text-align: center;">
            <h3>Items Sold</h3>
            <p style="font-size: 2rem; font-weight: bold;">{{ total_sales }}</p>
        </div>
        <!-- Add Product Box (Acts as button) -->
        <div
            style="padding: 20px; text-align: center; display: flex; align-items: center; justify-content: center; border: 1px dashed #ffffff;">
            <button onclick="document.getElementById('add-modal').style.display='block'"
                style="background: cyan; color: black; padding: 15px 30px; border: none; font-weight: bold; font-size: 1.2rem; cursor: pointer;">+
                ADD PRODUCT</button>
        </div>
    </div>

    <!-- Products List -->
    <div style="background: rgba(0,0,0,0.8); padding: 20px; border: 1px solid #333;">
        <h3>My Inventory</h3>
        <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
            <thead>
                <tr style="text-align: left; border-bottom: 1px solid #555;">
                    <th style="padding: 10px;">Name</th>
                    <th style="padding: 10px;">Price</th>
                    <th style="padding: 10px;">Category</th>
                    <th style="padding: 10px;">Status</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr style="border-bottom: 1px solid #333;">
                    <td style="padding: 10px;">{{ product.name }}</td>
                    <td style="padding: 10px;">{{ product.price }}</td>
                    <td style="padding: 10px;">{{ product.category }}</td>
                    <td style="padding: 10px; color: #0f0;">Active</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" style="padding: 20px; text-align: center; color: #888;">No products in the void.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Simple Modal for Adding Product -->
<div id="add-modal"
    style="display: none; position: fixed; top:0; left:0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 999;">
    <div
        style="position: relative; max-width: 500px; margin: 10% auto; background: #111; padding: 30px; border: 1px solid cyan;">
        <span onclick="document.getElementById('add-modal').style.display='none'"
            style="position: absolute; top: 10px; right: 15px; color: white; cursor: pointer; font-size: 1.5rem;">&times;</span>
        <h2 style="text-align: center; color: white;">Inject New Asset</h2>
        <form method="POST" action="{{ url_for('seller.add_product_action') }}">
            <div style="margin-bottom: 15px;">
                <label style="color: white;">Product Name</label>
                <input type="text" name="name" required style="width: 100%; padding: 8px;">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="color: white;">Price</label>
                <input type="number" step="0.01" name="price" required style="width: 100%; padding: 8px;">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="color: white;">Category</label>
                <select name="category" required style="width: 100%; padding: 8px;">
                    <option value="Consumer Goods">Consumer Goods</option>
                    <option value="Digital Assets">Digital Assets</option>
                    <option value="Forbidden Items">Forbidden Items</option>
                </select>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="color: white;">Image URL</label>
                <input type="url" name="image_url" placeholder="https://..." style="width: 100%; padding: 8px;">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="color: white;">Description</label>
                <textarea name="description" rows="3" style="width: 100%; padding: 8px;"></textarea>
            </div>
            <button type="submit"
                style="width: 100%; padding: 10px; background: cyan; color: black; font-weight: bold; border: none; cursor: pointer;">SUBMIT</button>
        </form>
    </div>
</div>

{% endblock %}