{% extends "layout.html" %}

{% block content %}
<div style="margin-top: 100px; max-width: 800px; margin-left: auto; margin-right: auto;">
    <h1>Your Digital Hoard</h1>

    {% if cart_items %}
    <table class="cart-table">
        <thead>
            <tr>
                <th>Item</th>
                <th>Price</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart_items %}
            <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.price }} {{ store.currency }}</td>
                <td>
                    <form action="{{ url_for('shop.remove_from_cart', product_id=item.id) }}" method="POST"
                        style="display:inline;">
                        <button type="submit"
                            style="background: red; color: white; border: 2px solid #000; cursor: pointer; padding: 5px 10px;">X</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
            <tr style="font-weight: bold; font-size: 1.2rem;">
                <td>TOTAL EXISTENTIAL COST</td>
                <td colspan="2" style="color: var(--accent-color);">{{ total }} {{ store.currency }}</td>
            </tr>
        </tbody>
    </table>

    <div style="margin-top: 50px; background: var(--card-bg); padding: 30px; border-radius: 15px;">
        <h2>Select Method of Payment</h2>
        <form action="{{ url_for('shop.checkout') }}" method="POST">
            {% for mode in store.payment_modes %}
            <div style="margin: 10px 0;">
                <input type="radio" id="{{ mode }}" name="payment_mode" value="{{ mode }}" required checked>
                <label for="{{ mode }}" style="margin-left: 10px; cursor: pointer;">{{ mode }}</label>
            </div>
            {% endfor %}

            <button type="submit" class="checkout-btn">Finalize Transaction</button>
        </form>
    </div>

    {% else %}
    <div style="text-align: center; margin-top: 50px;">
        <p>Your cart is empty. The void gazes back.</p>
        <a href="/" class="btn-buy"
            style="background: transparent; border: 1px solid var(--accent-color); color: var(--accent-color);">Fill the
            Void</a>
    </div>
    {% endif %}
</div>
{% endblock %}